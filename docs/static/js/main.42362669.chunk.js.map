{"version":3,"sources":["Pokemon.js","App.js","serviceWorker.js","index.js","assets/catchall.png"],"names":["Pokemon","name","type","sprite","_this","this","Object","classCallCheck","getName","getType","getSprite","URL","NUM_POKEMONS","App","props","possibleConstructorReturn","getPrototypeOf","call","fetchPokemons","_ref","asyncToGenerator","regenerator_default","a","mark","_callee","start","end","i","response","id","wrap","_context","prev","next","fetchUrl","sent","types","sprites","front_default","pokemons","set","preloadImage","t0","console","warn","message","stop","_x","_x2","apply","arguments","_ref2","_callee2","url","_context2","abrupt","fetch","then","ok","Error","code","json","catch","error","_x3","Image","src","displayPokemons","size","values","getAvailable","length","getRandom","displayed","add","sortSet","drawPokemons","clearInterval","interval","iterator","keys","key","value","undefined","has","caught","push","max","Math","floor","random","Set","Array","from","sort","b","parseInt","wildPoke","forEach","element","get","react_default","createElement","alt","onClick","clickDisplayed","setState","drawCaughtPokemons","caughtPoke","className","clickCaught","delete","catchAll","state","_this2","Map","setTimeout","setInterval","style","width","Component","Boolean","window","location","hostname","match","ReactDOM","render","App_App","document","getElementById","navigator","serviceWorker","ready","registration","unregister","module","exports","__webpack_require__","p"],"mappings":"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","file":"static/js/main.42362669.chunk.js","sourcesContent":["export default class Pokemon {\n    constructor(name, type, sprite) {\n        this.name = name\n        this.type = type\n        this.sprite = sprite\n    }\n\n    getName = () => { return this.name }\n    getType = () => { return this.type }\n    getSprite = () => { return this.sprite }\n}","import React, { Component } from 'react'\nimport './App.css'\nimport catchAll from './assets/catchall.png'\nimport Pokemon from './Pokemon'\n\nconst URL = 'https://pokeapi.co/api/v2/pokemon/'\nconst API_DELAY = 60000\n//delay between pokemons are displayed on screen\nconst DISPLAY_DELAY = 500\n//we could slightly increase this to mask the API limit:\n// const DISPLAY_DELAY = API_DELAY/99\nconst NUM_POKEMONS = 151\n\nexport default class App extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      wildPoke: [],\n      caughtPoke: [],\n      catchAll: false\n    }\n  }\n\n  componentDidMount() {\n    this.pokemons = new Map()\n    this.displayed = new Set()\n    this.caught = new Set()\n    this.catchAll = new Set()\n\n    //get pokemon details from API\n    this.fetchPokemons(1, 99)\n    //fetch again after 60 seconds due to API limit (100 requests per minute)\n    setTimeout(() => this.fetchPokemons(100, NUM_POKEMONS), API_DELAY)\n\n    //start pokemon display loop\n    this.interval = setInterval(this.displayPokemons, DISPLAY_DELAY)\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.interval)\n  }\n\n  fetchPokemons = async (start, end) => {\n    for (let i = start; i < end + 1; i++) {\n      try {\n        const response = await this.fetchUrl(URL + i)\n\n        const id = response.id\n        const name = response.name\n        const type = response.types[0].type.name\n        const sprite = response.sprites.front_default\n\n        //retry on error\n        if (!name || !type || !sprite) this.fetchPokemons(i, i)\n        else {\n          //add it to the map using id as key\n          this.pokemons.set(id, new Pokemon(name, type, sprite))\n          //preload its thumbnail to ensure it's cached\n          this.preloadImage(sprite)\n        }\n      } catch (e) {\n        console.warn(e.message)\n      }\n    }\n  }\n\n  fetchUrl = async url => {\n    return fetch(url)\n      .then(response => {\n        if (!response.ok) throw new Error(\"Error \" + response.code)\n\n        return response.json()\n      })\n      .catch(error => console.warn(error.message))\n  }\n\n  preloadImage = url => {\n    const img = new Image()\n    img.src = url\n  }\n\n  displayPokemons = () => {\n    if (!this.pokemons.size) return\n\n    //get available pokemons which are not displayed\n    let values = this.getAvailable()\n\n    if (!values.length) return\n\n    //get a random available pokemon\n    let randomKey = this.getRandom(values.length) - 1\n    let id = values[randomKey]\n\n    //then add it to list of displayed pokemons\n    this.displayed.add(id)\n    this.displayed = this.sortSet(this.displayed)\n    this.drawPokemons()\n\n    //if all pokemons are caught, stop the interval\n    if (this.displayed.size === NUM_POKEMONS) clearInterval(this.interval)\n  }\n\n  //returns array of available pokemon ids (not displayed and not caught)\n  getAvailable = () => {\n    let values = []\n    let iterator = this.pokemons.keys()\n    let key = iterator.next().value\n    while (key !== undefined) {\n      if (!this.displayed.has(key) && !this.caught.has(key)) values.push(key)\n      key = iterator.next().value\n    }\n\n    return values\n  }\n\n  //returns random number between 1 and max\n  getRandom = max => {\n    return Math.floor(Math.random() * max) + 1\n  }\n\n  sortSet = set => {\n    return new Set(\n      Array.from(set)\n        .sort((a, b) => {\n          return parseInt(a) - parseInt(b)\n        })\n    )\n  }\n\n  //turn pokemon details into JSX\n  drawPokemons = () => {\n    if (!this.displayed.size) return\n\n    let wildPoke = []\n\n    this.displayed.forEach((key) => {\n      const element = this.pokemons.get(key)\n\n      wildPoke.push(\n        <img src={element.getSprite()} alt={element.getName()} onClick={() => this.clickDisplayed(key)} key={key} />\n      )\n    })\n\n    this.setState({ wildPoke })\n  }\n\n  //turn pokemon details into JSX\n  drawCaughtPokemons = () => {\n    let caughtPoke = []\n\n    this.caught.forEach(key => {\n      const element = this.pokemons.get(key)\n\n      caughtPoke.push(\n        <div className=\"pokeFrame\" key={key} onClick={() => this.clickCaught(key)}>\n          <div className=\"pokePic\">\n            <img src={element.getSprite()} alt={element.getName()} />\n          </div>\n          <div className=\"pokeDetails\">\n            <p>Id: </p>\n            <p>Name: </p>\n            <p>Type: </p>\n          </div>\n          <div className=\"pokeDetails\">\n            <p>{key}</p>\n            <p>{element.getName()}</p>\n            <p>{element.getType()}</p>\n          </div>\n        </div>\n      )\n    })\n\n    this.setState({ caughtPoke })\n  }\n\n  //click handler for displayed pokemon\n  clickDisplayed = id => {\n    if (this.caught.size === 6) return\n\n    //add it to the caught map and delete it from the displayed map\n    this.caught.add(id)\n    this.caught = this.sortSet(this.caught)\n    this.displayed.delete(id)\n\n    //redraw both groups\n    this.drawPokemons()\n    this.drawCaughtPokemons()\n\n    //easter egg\n    this.catchAll.add(id)\n    if (this.catchAll.size === NUM_POKEMONS) this.setState({ catchAll: true })\n  }\n\n  //click handler for caught pokemon\n  clickCaught = id => {\n    //add it to the displayed map and delete it from the caught map\n    this.displayed.add(id)\n    this.displayed = this.sortSet(this.displayed)\n    this.caught.delete(id)\n\n    //redraw both groups\n    this.drawPokemons()\n    this.drawCaughtPokemons()\n  }\n\n  render() {\n    return (\n      <div className=\"container\">\n        <div className=\"columnLeft\">\n          <h3>Wild Pokémons</h3>\n          <div className=\"pokemonListLeft\">\n            {this.state.wildPoke}\n          </div>\n        </div>\n\n        <div className=\"columnRight\">\n          <h3>Caught Pokémons</h3>\n          <div className=\"pokemonListRight\">\n            {this.state.catchAll &&\n              <div>\n                <img src={catchAll} alt=\"Gotta catch 'em all!\" style={{ width: 384 }} />\n              </div>}\n            {this.state.caughtPoke}\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/catchall.5ed4e078.png\";"],"sourceRoot":""}